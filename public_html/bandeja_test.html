<!DOCTYPE html>
<!--
    Es la landing page del usuario que hace login exitosamente.
    Contiene el menu, la status bar y un newsfeed.
-->
<html>
    <head>
        <title>MENU</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/css/bootstrap-theme.css">
        <link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/css/bootstrap.css">
        <link rel="stylesheet" href="css/main.css">
        <link href="https://fonts.googleapis.com/css?family=Dosis|Poiret+One" rel="stylesheet">
        <script src="js/vendor/modernizr-2.8.3-respond-1.4.2.min.js"></script>
    </head>
    <body>
        
        <div class="container">
            <div class="row">
                <div class="well well-sm"><h1>BANDEJAS</h1></div>
            </div>
            <div class="row">
                <button id="selectBandeja" class="btn btn-default" data-toggle="tooltip" title="Modal con listado de bandejas">ELEGIR BANDEJAS</button>
            </div>
            <div class="row bandejaEditor">
                <div class="bandejaElegida"></div>
                <div class="editorTools panel panel-default">
                </div>
                <div class="bandejaViewport"></div>
            </div>
        </div>
        
        <!-- MODAL -->
        <div class="modal fade" id="modalBandejas">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">x</button>
                        <h4 class="modal-title" id="myModalLabel"></h4>
                    </div>
                    <div class="modal-body" id="modalPrincipal">
                        
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-default" data-dismiss="modal">Cerrar</button>
                    </div>
                </div>
            </div>
        </div>
        <!-- FIN MODAL -->
        
        <script src="js/vendor/jquery-1.11.2.js"></script>
        <script src="js/vendor/bootstrap.min.js"></script>
        <script>
            $(document).ready(function(){
               // Inicializo los tooltips
               $(function () { 
                   $('[data-toggle="tooltip"]').tooltip();
               }); 
            });
            
            function getListadoBandejas(){
                // La profundidad, largo, etc son datos que los traigo una vez solamente, aca los listo muchas veces porque no tengo contenido dinamico
                var contenido = '<div class="bandejaDet" data-id="1"><a href"#">Bandeja 1</a></div>';
                contenido += '<div class="bandejaDet" data-id="2"><a href"#">Bandeja 2</a></div>';
                contenido += '<div class="bandejaDet" data-id="3"><a href"#">Bandeja 3</a></div>';
                $("#modalPrincipal").append(contenido);
            };
            
            function armoBandeja(idElegida){
                // Armar AJAX para traer datos de la bandeja elegida. Para la logica, pongo los datos a mano
                // Traigo las ubicaciones tambien, cada ubicacion tendra un ID, ancho y prof
                var ancho = 240;
                var prof = 60;
                // Armo una relacion visual entre el tama√±o de la bandeja y los pixeles posibles
                ancho = 4*ancho;
                prof = 4*prof;
                
                        
            };
            
            $("#selectBandeja").click(function(){
                $("#modalPrincipal").html("");
                $("#modalBandejas").modal({
                    keyboard: false
                });
                // Consulto el listado de bandejas por ajax
                var listado = getListadoBandejas();
                
            });
            
            // Seleccion de la bandeja
            $('#modalPrincipal').on('click','.bandejaDet', function(){
                var bandejaElegida = $(this).data("id");
                $(".bandejaElegida").html("Bandeja "+bandejaElegida);
                //Cierro el modal
                $("#modalBandejas").modal('toggle');
                armoBandeja(bandejaElegida);
            });
            
        </script>
    </body>
</html>